# Tauri Plugin torch

This project is a Tauri plugin which allows for flash control on iOS and Android devices with a consistent API.

## API

### Available Commands

```ts
import { ping, toggle, check } from "tauri-plugin-torch-api";
async function toggleTorch() {
    const isTorchOn = await check();
    if (isTorchOn) {
        await toggle(false);
        updateResponse("Torch is off");
    } else {
        await toggle(true);
        updateResponse("Torch is on");
    }
}

async function onTorch() {
    toggle(true).then(updateResponse).catch(updateResponse);
}

async function offTorch() {
    toggle(false).then(updateResponse).catch(updateResponse);
}
```

### Default Permission

This permission set configures which
torch features are by default exposed.

#### Granted Permissions

It allows access to all torch commands.

#### This default permission set includes the following:

-   `allow-ping`
-   `allow-toggle`
-   `allow-check`

### Permission Table

<table>
<tr>
<th>Identifier</th>
<th>Description</th>
</tr>

<tr>
<td>

`torch:allow-check`

</td>
<td>

Enable the check command.

</td>
</tr>

<tr>
<td>

`torch:deny-check`

</td>
<td>

Disable the check command.

</td>
</tr>

<tr>
<td>

`torch:allow-ping`

</td>
<td>

Enables the ping command without any pre-configured scope.

</td>
</tr>

<tr>
<td>

`torch:deny-ping`

</td>
<td>

Denies the ping command without any pre-configured scope.

</td>
</tr>

<tr>
<td>

`torch:allow-toggle`

</td>
<td>

Enable the toggle command.

</td>
</tr>

<tr>
<td>

`torch:deny-toggle`

</td>
<td>

Disable the toggle command.

</td>
</tr>
</table>

# Notes

1. Ping command is boilerplate code, ignore it, I kept it in the reference, might remove later.
2. Android src code syntax highlighting does not work, this is a tauri issue. Shitty DX.
3. iOS src code package import does not work in VSCode, opening in XCode does give a better DX.
4. Permission tomls had to be added manually to `./permissions/autogenerated/commands`, contrary to what the tauri documentation says.
5. I am talking about the DX issues on the Tauri discord server, updates can be had on thread: https://discord.com/channels/616186924390023171/1367792417889189938
